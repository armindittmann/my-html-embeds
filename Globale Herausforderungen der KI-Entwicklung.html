<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globale Herausforderungen der KI-Entwicklung</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@400;700;900&display=swap');

        body {
            background-color: #010418;
            color: #d1d5db;
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .text-glow-cyan {
            text-shadow: 0 0 5px rgba(34, 211, 238, 0.7), 0 0 10px rgba(34, 211, 238, 0.5), 0 0 15px rgba(34, 211, 238, 0.3);
        }

        .text-glow-fuchsia {
            text-shadow: 0 0 5px rgba(217, 70, 239, 0.7), 0 0 10px rgba(217, 70, 239, 0.5), 0 0 15px rgba(217, 70, 239, 0.3);
        }
        
        .text-glow-lime {
            text-shadow: 0 0 5px rgba(163, 230, 53, 0.8), 0 0 10px rgba(163, 230, 53, 0.6), 0 0 15px rgba(163, 230, 53, 0.4);
        }

        .section-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8rem 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .section-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(circle at 50% 50%, rgba(13, 30, 71, 0.2) 0%, transparent 70%);
            pointer-events: none;
        }

        .scroll-down-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-15px);
            }
            60% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .fade-in.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Iceberg SVG styling */
        #iceberg-viz { transition: transform 1.5s ease-in-out; }
        #iceberg-text-hidden .label-text {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 10px;
            font-family: 'Orbitron', sans-serif;
        }
        #iceberg-viz.scrolled #iceberg-text-hidden .label-text {
            opacity: 1;
        }
        
        /* Compute Power Map */
        .map-region {
            transition: fill 0.3s ease, filter 0.3s ease;
            cursor: pointer;
        }
        .map-region:hover, .map-region:focus {
            filter: drop-shadow(0 0 10px #fff);
            outline: none;
        }
        #map-usa { fill: #1e40af; }
        #map-china { fill: #991b1b; }
        #map-eu { fill: #047857; }
        #map-rest { fill: #4b5563; cursor: default; }
        
        #map-usa.active, #map-china.active, #map-eu.active {
            animation: pulse-glow 1.5s infinite;
        }
        
        @keyframes pulse-glow {
            0% { filter: drop-shadow(0 0 5px currentColor); }
            50% { filter: drop-shadow(0 0 20px currentColor); }
            100% { filter: drop-shadow(0 0 5px currentColor); }
        }

        /* Nvidia Pie Chart */
        .pie-chart-bg { stroke: #374151; }
        .pie-chart-fg {
            stroke: #a3e635;
            stroke-dasharray: 251.2; /* circumference: 2 * pi * 40 */
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 2s ease-in-out;
            filter: drop-shadow(0 0 5px #a3e635);
        }
        .pie-chart.is-visible .pie-chart-fg {
            stroke-dashoffset: 50.24; /* 251.2 * (1 - 0.8) */
        }
        
        /* Data Chaos */
        #data-chaos-container {
            position: relative;
            width: 100%;
            height: 200px;
            background: #020617;
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
        }
        .chaos-char {
            position: absolute;
            color: #64748b;
            font-size: 14px;
            animation: fly 15s linear infinite;
        }
        @keyframes fly {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx, 0px), var(--ty, 0px)) rotate(360deg);
                opacity: 0;
            }
        }
        #data-clean-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #020617;
            clip-path: inset(0 100% 0 0);
            transition: clip-path 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6ee7b7;
            font-family: monospace;
            white-space: pre;
            padding: 1rem;
            text-align: left;
        }
        #data-chaos-container.cleaned #data-clean-overlay {
            clip-path: inset(0 0 0 0);
        }

        /* Talent War */
        #talent-war-viz {
            position: relative;
            width: 100%;
            height: 250px;
        }
        .company-node {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #e5e7eb;
            z-index: 10;
        }
        .company-node.large {
            width: 100px; height: 100px;
            border: 3px solid;
            font-size: 1.1rem;
        }
        .talent-node {
            position: absolute;
            width: 12px; height: 12px;
            background-color: #f472b6;
            border-radius: 50%;
            box-shadow: 0 0 8px #f472b6;
            transition: all 2.5s cubic-bezier(0.6, -0.28, 0.735, 0.045);
            z-index: 5;
        }
        .talent-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(244, 114, 182, 0.5));
            transform-origin: 0 50%;
            opacity: 0;
            transition: opacity 0.5s ease 2s;
            z-index: 1;
        }

        .grid-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(to right, rgba(20, 83, 154, 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(20, 83, 154, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
            animation: pan-grid 60s linear infinite;
        }
        @keyframes pan-grid {
            0% { background-position: 0 0; }
            100% { background-position: 1200px 1200px; }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Hero Section -->
    <header id="hero" class="h-screen w-full flex flex-col items-center justify-center text-center p-4 relative overflow-hidden">
        <canvas id="particle-canvas" class="absolute top-0 left-0 w-full h-full z-0"></canvas>
        <div class="z-10">
            <h1 class="text-4xl md:text-7xl font-bold mb-4 text-glow-cyan">Globale Herausforderungen der KI-Entwicklung</h1>
            <p class="text-xl md:text-2xl text-gray-300 max-w-4xl mx-auto">
                Der aktuelle Stand der KI: Verborgene Herausforderungen und das globale Wettrennen um die Zukunft.
            </p>
        </div>
        <div class="scroll-down-indicator text-cyan-400">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m14-4l-7 7-7-7" />
            </svg>
        </div>
    </header>

    <main>

        <!-- 1. Stagnation und verborgene Triebkräfte -->
        <section class="section-container">
            <div class="grid-bg"></div>
            <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                <div class="fade-in">
                    <h2 class="text-3xl md:text-4xl mb-4 text-cyan-400">1. Die Spitze des Eisbergs</h2>
                    <p class="text-lg text-gray-400 mb-4">
                        In der Welt der Künstlichen Intelligenz herrscht der Eindruck einer Verlangsamung. Dieses Gefühl täuscht jedoch über die tatsächlichen Vorgänge hinweg. Unter der Oberfläche findet ein intensiver Wettkampf statt, um die aktuellen Hürden zu überwinden.
                    </p>
                    <p class="font-bold text-gray-200">
                        Diese Auseinandersetzung manifestiert sich in massiven Investitionen, dem Abwerben von Spitzenkräften und strategischen Projekten von globalem Ausmaß.
                    </p>
                </div>
                <div id="iceberg-container" class="w-full h-[50vh] flex items-center justify-center fade-in">
                    <svg id="iceberg-viz" viewBox="0 -20 200 220" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Animation eines Eisbergs, der die sichtbare Stagnation und die verborgenen Triebkräfte darunter visualisiert.">
                        <defs>
                            <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#0d1a47;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#010418;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="waterGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#0f3460;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#010c1f;stop-opacity:0.9" />
                            </linearGradient>
                        </defs>
                        <rect width="200" height="220" y="-20" fill="url(#skyGradient)" />
                        <rect y="50" width="200" height="150" fill="url(#waterGradient)" />
                        
                        <!-- Iceberg -->
                        <path d="M50,50 L150,50 L180,70 L160,100 L120,150 L80,160 L40,120 L20,80 Z" fill="#e0f2fe" stroke="#a5f3fc" stroke-width="0.5" style="filter: drop-shadow(0px 5px 15px rgba(165, 243, 252, 0.2));" />
                        <path d="M70,50 L130,50 L100,20 Z" fill="#f0f9ff" stroke="#a5f3fc" stroke-width="0.5" />
                        
                        <!-- Text -->
                        <text x="100" y="45" fill="#f0f9ff" font-size="6" text-anchor="middle" font-family="Orbitron">Wahrgenommene Stagnation</text>
                        <line x1="100" y1="50" x2="100" y2="55" stroke="#f0f9ff" stroke-width="0.5" />
                        
                        <g id="iceberg-text-hidden">
                            <g class="label-text"><circle cx="150" cy="80" r="1.5" fill="#fuchsia-500"/><text x="155" y="81" fill="#fuchsia-400">Strategische Projekte</text></g>
                            <g class="label-text"><circle cx="50" cy="100" r="1.5" fill="#fuchsia-500"/><text x="45" y="101" fill="#fuchsia-400" text-anchor="end">Milliarden-Investitionen</text></g>
                            <g class="label-text"><circle cx="100" cy="140" r="1.5" fill="#fuchsia-500"/><text x="100" y="148" fill="#fuchsia-400" text-anchor="middle">Talentkrieg</text></g>
                            <g class="label-text"><circle cx="140" cy="120" r="1.5" fill="#fuchsia-500"/><text x="145" y="121" fill="#fuchsia-400">Infrastruktur-Wettlauf</text></g>
                        </g>
                    </svg>
                </div>
            </div>
        </section>

        <!-- 2. Rechenleistung und Infrastruktur -->
        <section class="section-container bg-[#020822]">
            <div class="grid-bg"></div>
            <div class="max-w-7xl mx-auto w-full">
                <div class="text-center mb-16 fade-in">
                    <h2 class="text-3xl md:text-4xl mb-4 text-cyan-400">2. Engpass: Rechenleistung</h2>
                    <p class="text-lg text-gray-400 max-w-3xl mx-auto">Die Grundlage moderner KI ist eine gewaltige physische Infrastruktur. Der Mangel an Rechenleistung ist der erste kritische Engpass, der einen globalen Bauboom für Rechenzentren ausgelöst hat.</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div class="fade-in" style="transition-delay: 200ms;">
                        <h3 class="text-2xl mb-4 text-glow-fuchsia">Geopolitische Machtverteilung</h3>
                        <p class="mb-6 text-gray-300">Die globale KI-Rechenleistung ist extrem konzentriert. Interagieren Sie mit den Regionen, um die Verteilung zu sehen.</p>
                        <div id="map-tooltip" class="absolute hidden bg-gray-900 border border-cyan-400 p-3 rounded-lg shadow-lg text-white pointer-events-none z-20" role="tooltip"></div>
                        <svg id="compute-map" viewBox="0 0 1000 500" class="w-full h-auto rounded-lg border border-blue-900/50 bg-blue-900/10" role="img" aria-label="Weltkarte der KI-Rechenleistung">
                            <path id="map-rest" class="map-region" data-name="Rest der Welt" data-value="5%" d="M0,0 h1000 v500 h-1000 z"></path>
                            <path id="map-usa" class="map-region" data-name="USA" data-value="63%" d="M130,220 L125,180 L180,150 L250,80 L320,100 L350,170 L280,240 L190,260 Z" tabindex="0"><title>USA: 63%</title></path>
                            <path id="map-china" class="map-region" data-name="China" data-value="28%" d="M650,120 L850,120 L900,200 L820,280 L680,260Z" tabindex="0"><title>China: 28%</title></path>
                            <path id="map-eu" class="map-region" data-name="Europa" data-value="4%" d="M450,80 L580,80 L560,200 L470,200Z" tabindex="0"><title>Europa: 4%</title></path>
                        </svg>
                    </div>
                    
                    <div class="fade-in" style="transition-delay: 400ms;">
                         <h3 class="text-2xl mb-4 text-glow-fuchsia">Strategische Großprojekte</h3>
                         <p class="mb-6 text-gray-300">Konzerne und Staaten investieren massiv, um ihre Vormachtstellung zu sichern. Dies wird als "Digitaler Feudalismus" bezeichnet.</p>
                         <div class="space-y-4">
                            <div class="bg-gray-800/50 border border-gray-700 p-4 rounded-lg hover:border-fuchsia-500 hover:bg-gray-800 transition-all duration-300">
                                <h4 class="font-bold text-fuchsia-400">OpenAI - "Stargate"</h4>
                                <p class="text-sm text-gray-400">Ein geplanter Supercomputer im Wert von 100 Mrd. US-Dollar für fortschrittlichste KI-Modelle.</p>
                            </div>
                             <div class="bg-gray-800/50 border border-gray-700 p-4 rounded-lg hover:border-fuchsia-500 hover:bg-gray-800 transition-all duration-300">
                                <h4 class="font-bold text-fuchsia-400">Microsoft Global Network</h4>
                                <p class="text-sm text-gray-400">Ein globales Netz aus über 200 Rechenzentren, um KI-Dienste weltweit mit geringer Latenz bereitzustellen.</p>
                            </div>
                             <div class="bg-gray-800/50 border border-gray-700 p-4 rounded-lg hover:border-fuchsia-500 hover:bg-gray-800 transition-all duration-300">
                                <h4 class="font-bold text-fuchsia-400">USA & G42 in Abu Dhabi</h4>
                                <p class="text-sm text-gray-400">Ein strategischer Knotenpunkt an der Schnittstelle der Unterseekabel zwischen Europa, Afrika und Asien.</p>
                            </div>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Spezialisierte Chips (GPUs) -->
        <section class="section-container">
            <div class="grid-bg"></div>
            <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                <div class="order-2 lg:order-1 fade-in">
                    <h3 class="text-2xl mb-4 text-glow-lime">Nvidias Dominanz</h3>
                    <p class="mb-6 text-gray-300">Spezialisierte Grafikprozessoren (GPUs) sind die Währung im KI-Rennen. Nvidia kontrolliert den Markt fast vollständig.</p>
                    <div class="pie-chart w-64 h-64 mx-auto relative" role="img" aria-label="Kreisdiagramm: Nvidia hat einen Marktanteil von 80%.">
                        <svg viewBox="0 0 100 100" class="w-full h-full transform -rotate-90">
                            <circle class="pie-chart-bg" cx="50" cy="50" r="40" fill="transparent" stroke-width="10"></circle>
                            <circle class="pie-chart-fg" cx="50" cy="50" r="40" fill="transparent" stroke-width="10" stroke-linecap="round"></circle>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                           <span class="text-5xl font-bold text-lime-300">80%</span>
                           <span class="text-lg text-gray-300">Marktanteil</span>
                        </div>
                    </div>
                </div>
                <div class="order-1 lg:order-2 fade-in">
                    <h2 class="text-3xl md:text-4xl mb-4 text-cyan-400">3. Engpass: Spezialisierte Chips</h2>
                    <p class="text-lg text-gray-400 mb-4">
                        Chips sind ein geopolitisches Machtinstrument. Die US-Regierung kontrolliert den Export, was andere Nationen wie China zu kreativen Lösungen zwingt.
                    </p>
                    <div class="bg-gray-900/50 border border-gray-700 p-6 rounded-lg">
                        <h4 class="font-bold text-lime-400 mb-2">Chinas Umgehung der Sanktionen</h4>
                        <p class="text-sm text-gray-300">
                        Um die US-Sanktionen zu umgehen, mieten chinesische Firmen Rechenleistung im Ausland, trainieren dort ihre KI-Modelle und übertragen die fertigen Modelle digital zurück nach China.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Daten -->
        <section class="section-container bg-[#020822]">
            <div class="grid-bg"></div>
            <div class="max-w-7xl mx-auto w-full text-center">
                <div class="mb-16 fade-in">
                    <h2 class="text-3xl md:text-4xl mb-4 text-cyan-400">4. Engpass: Daten</h2>
                    <p class="text-lg text-gray-400 max-w-3xl mx-auto">Die bisherige Methode – mehr Daten für bessere KI – stößt an ihre Grenzen. Die hochwertigen Datenquellen des Internets sind bald erschöpft.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div class="fade-in" style="transition-delay: 200ms;">
                        <h3 class="text-2xl mb-4 text-glow-fuchsia">Die Erschöpfung der Datenquellen</h3>
                        <p class="text-gray-400 mb-4">Experten prognostizieren, dass die frei verfügbaren, hochwertigen Trainingsdaten bis 2028 aufgebraucht sein werden.</p>
                        <div id="data-drain-viz" class="w-full max-w-md mx-auto h-48 bg-blue-900/20 border-2 border-blue-500 rounded-b-lg relative overflow-hidden">
                            <div id="data-level" class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-cyan-500 to-blue-500 transition-all duration-[2000ms] ease-out" style="height: 90%;"></div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-white text-2xl font-bold drop-shadow-lg">Hochwertige Internet-Daten</span>
                            </div>
                             <div id="data-timeline" class="absolute bottom-0 left-0 w-full text-center text-red-400 font-bold opacity-0 transition-opacity duration-1000 ease-out" style="bottom: 10%;">
                                <hr class="border-t-2 border-dashed border-red-400 mb-1">
                                <span>Grenze ca. 2028</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fade-in" style="transition-delay: 400ms;">
                        <h3 class="text-2xl mb-4 text-glow-fuchsia">Qualität statt Quantität</h3>
                        <p class="text-gray-400 mb-4">Ein Großteil der Daten ist fehlerhaft ("Daten-Chaos"), was zu KI-"Halluzinationen" führt. Der neue Fokus liegt auf der Bereinigung und Erstellung von Qualitätsdaten.</p>
                        <div id="data-chaos-container" class="mx-auto max-w-md">
                           <div id="data-clean-overlay" aria-hidden="true">[ { "event": "user_login", "timestamp": "...", "success": true }, <br> { "event": "page_view", "path": "/home", "user_id": 123 }, <br> { "event": "purchase", "item_id": "xyz", "amount": 99.99 } ]</div>
                        </div>
                        <button id="clean-data-btn" class="mt-4 bg-fuchsia-600 text-white font-bold py-2 px-4 rounded-full hover:bg-fuchsia-500 transition-colors shadow-lg shadow-fuchsia-500/20">Daten bereinigen</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Menschliches Talent -->
        <section class="section-container">
            <div class="grid-bg"></div>
            <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                <div class="fade-in">
                    <h2 class="text-3xl md:text-4xl mb-4 text-cyan-400">5. Engpass: Menschliches Talent</h2>
                    <p class="text-lg text-gray-400 mb-4">
                        Trotz aller technologischen Herausforderungen hängt der Fortschritt letztendlich von den Menschen ab. Es herrscht ein regelrechter "Krieg um Talente".
                    </p>
                    <p class="font-bold text-gray-200">
                        Besonders aggressiv agiert Meta, das gezielt Ingenieure von Konkurrenten wie OpenAI abwirbt – mit millionenschweren Angeboten. Ingenieure sind zum "neuen Öl" der KI-Ära geworden.
                    </p>
                </div>
                <div class="w-full h-[300px] flex items-center justify-center fade-in">
                    <div id="talent-war-viz">
                        <div id="openai-node" class="company-node large" style="top: 50%; left: 10%; transform: translateY(-50%); border-color: #10b981;">OpenAI</div>
                        <div id="meta-node" class="company-node large" style="top: 50%; right: 10%; transform: translateY(-50%); border-color: #3b82f6;">Meta</div>
                        <!-- Talent nodes and lines will be generated by JS -->
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center p-8 bg-[#010418] border-t border-gray-800">
        <p class="text-gray-500">Eine interaktive Visualisierung der globalen Herausforderungen der KI-Entwicklung.</p>
        <p class="text-gray-600 text-sm mt-4">„Hinweis: Dieser HTML-Inhalt wurde automatisiert durch KI erstellt. Inhalte können fehlerhaft sein und müssen je nach Kontext validiert werden.“</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Particle Canvas ---
            const canvas = document.getElementById('particle-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                let particles = [];
                let numParticles = Math.floor(canvas.width / 20);

                class Particle {
                    constructor() {
                        this.x = Math.random() * canvas.width;
                        this.y = Math.random() * canvas.height;
                        this.size = Math.random() * 2 + 1;
                        this.speedX = Math.random() * 1 - 0.5;
                        this.speedY = Math.random() * 1 - 0.5;
                        this.color = 'rgba(34, 211, 238, 0.5)';
                    }
                    update() {
                        if (this.x > canvas.width || this.x < 0) this.speedX *= -1;
                        if (this.y > canvas.height || this.y < 0) this.speedY *= -1;
                        this.x += this.speedX;
                        this.y += this.speedY;
                    }
                    draw() {
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }

                function initParticles() {
                    particles = [];
                    numParticles = Math.floor(window.innerWidth / 20);
                    for (let i = 0; i < numParticles; i++) {
                        particles.push(new Particle());
                    }
                }

                function animateParticles() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let i = 0; i < particles.length; i++) {
                        particles[i].update();
                        particles[i].draw();
                    }
                    connectParticles();
                    requestAnimationFrame(animateParticles);
                }

                function connectParticles() {
                    for (let a = 0; a < particles.length; a++) {
                        for (let b = a; b < particles.length; b++) {
                            let distance = Math.hypot(particles[a].x - particles[b].x, particles[a].y - particles[b].y);
                            if (distance < 100) {
                                ctx.strokeStyle = `rgba(34, 211, 238, ${1 - distance / 100})`;
                                ctx.lineWidth = 0.5;
                                ctx.beginPath();
                                ctx.moveTo(particles[a].x, particles[a].y);
                                ctx.lineTo(particles[b].x, particles[b].y);
                                ctx.stroke();
                            }
                        }
                    }
                }
                initParticles();
                animateParticles();
                window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    initParticles();
                });
            }

            // --- Intersection Observer for fade-in animations ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));


            // --- Section 1: Iceberg Scroll ---
            const icebergContainer = document.getElementById('iceberg-container');
            const icebergViz = document.getElementById('iceberg-viz');
            if (icebergContainer && icebergViz) {
                const icebergObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const scrollRatio = Math.max(0, Math.min(1, entry.intersectionRatio - 0.2));
                            const translateY = 70 * scrollRatio;
                            icebergViz.style.transform = `translateY(-${translateY}px)`;
                            if (scrollRatio > 0.5) {
                                icebergViz.classList.add('scrolled');
                            } else {
                                icebergViz.classList.remove('scrolled');
                            }
                        }
                    });
                }, { threshold: Array.from(Array(101).keys(), i => i / 100) });
                icebergObserver.observe(icebergContainer);
            }

            // --- Section 2: Compute Power Map ---
            const mapRegions = document.querySelectorAll('.map-region');
            const tooltip = document.getElementById('map-tooltip');
            if (mapRegions.length > 0 && tooltip) {
                function showTooltip(e) {
                    const region = e.currentTarget;
                    tooltip.innerHTML = `<span class="font-bold text-cyan-400">${region.dataset.name}</span><br>${region.dataset.value} der globalen KI-Rechenleistung`;
                    tooltip.style.display = 'block';

                    if (e.type === 'mousemove' || e.type === 'mouseenter') {
                        tooltip.style.left = `${e.pageX + 15}px`;
                        tooltip.style.top = `${e.pageY + 15}px`;
                        tooltip.style.transform = 'none';
                    } else { // focus
                        const rect = region.getBoundingClientRect();
                        tooltip.style.left = `${rect.left + rect.width / 2 + window.scrollX}px`;
                        tooltip.style.top = `${rect.bottom + 10 + window.scrollY}px`;
                        tooltip.style.transform = 'translateX(-50%)';
                    }
                }

                function hideTooltip() {
                    tooltip.style.display = 'none';
                }

                mapRegions.forEach(region => {
                    region.addEventListener('mousemove', showTooltip);
                    region.addEventListener('mouseenter', showTooltip);
                    region.addEventListener('mouseleave', hideTooltip);
                    if (region.hasAttribute('tabindex')) {
                        region.addEventListener('focus', showTooltip);
                        region.addEventListener('blur', hideTooltip);
                    }
                });

                const mapObserver = new IntersectionObserver(entries => {
                    if (entries[0].isIntersecting) {
                        document.getElementById('map-usa')?.classList.add('active');
                        document.getElementById('map-china')?.classList.add('active');
                        document.getElementById('map-eu')?.classList.add('active');
                    }
                }, { threshold: 0.5 });
                mapObserver.observe(document.getElementById('compute-map'));
                document.getElementById('map-rest').setAttribute('fill', '#1f2937');
            }


            // --- Section 3: Pie Chart ---
            const pieChart = document.querySelector('.pie-chart');
            if (pieChart) observer.observe(pieChart);

            
            // --- Section 4: Data Chaos & Clean ---
            const chaosContainer = document.getElementById('data-chaos-container');
            const cleanBtn = document.getElementById('clean-data-btn');
            if (chaosContainer && cleanBtn) {
                const numChars = 150;
                const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()[]{};':,.<>/?";
                for(let i=0; i<numChars; i++) {
                    let char = document.createElement('span');
                    char.classList.add('chaos-char');
                    char.setAttribute('aria-hidden', 'true');
                    char.innerText = chars[Math.floor(Math.random() * chars.length)];
                    char.style.top = `${Math.random() * 100}%`;
                    char.style.left = `${Math.random() * 100}%`;
                    char.style.setProperty('--tx', `${(Math.random() - 0.5) * 300}px`);
                    char.style.setProperty('--ty', `${(Math.random() - 0.5) * 300}px`);
                    char.style.animationDuration = `${Math.random() * 10 + 8}s`;
                    char.style.animationDelay = `${Math.random() * -18}s`;
                    chaosContainer.appendChild(char);
                }
                
                cleanBtn.addEventListener('click', () => {
                    chaosContainer.classList.toggle('cleaned');
                    cleanBtn.innerText = chaosContainer.classList.contains('cleaned') ? 'Chaos wiederherstellen' : 'Daten bereinigen';
                });
            }

            // Data Drain animation
            const dataDrainViz = document.getElementById('data-drain-viz');
            if (dataDrainViz) {
                const dataLevel = document.getElementById('data-level');
                const dataTimeline = document.getElementById('data-timeline');
                const drainObserver = new IntersectionObserver(entries => {
                    if(entries[0].isIntersecting) {
                        dataLevel.style.height = '10%';
                        setTimeout(() => { dataTimeline.style.opacity = '1'; }, 1500);
                    }
                }, { threshold: 0.7 });
                drainObserver.observe(dataDrainViz);
            }

            // --- Section 5: Talent War ---
            const talentViz = document.getElementById('talent-war-viz');
            if (talentViz) {
                const openaiNode = document.getElementById('openai-node');
                const metaNode = document.getElementById('meta-node');
                const numTalents = 15;
                let talentsMoved = false;

                for (let i = 0; i < numTalents; i++) {
                    const talent = document.createElement('div');
                    talent.classList.add('talent-node');
                    talent.dataset.id = i;
                    const angle = (i / numTalents) * Math.PI * 2;
                    const radius = 60 + Math.random() * 20;
                    talent.style.left = `${openaiNode.offsetLeft + openaiNode.offsetWidth / 2 + Math.cos(angle) * radius - 6}px`;
                    talent.style.top = `${openaiNode.offsetTop + openaiNode.offsetHeight / 2 + Math.sin(angle) * radius - 6}px`;
                    talentViz.appendChild(talent);
                }

                const talentObserver = new IntersectionObserver(entries => {
                    if(entries[0].isIntersecting && !talentsMoved) {
                        talentsMoved = true;
                        const talentsToMove = talentViz.querySelectorAll('.talent-node');
                        talentsToMove.forEach((talent, i) => {
                           if (i % 3 === 0) { // Move every third talent
                               setTimeout(() => {
                                   const startX = talent.offsetLeft + 6;
                                   const startY = talent.offsetTop + 6;

                                   const angle = (i / numTalents) * Math.PI * 2;
                                   const radius = 60 + Math.random() * 20;
                                   const newLeft = `${metaNode.offsetLeft + metaNode.offsetWidth / 2 + Math.cos(angle) * radius - 6}px`;
                                   const newTop = `${metaNode.offsetTop + metaNode.offsetHeight / 2 + Math.sin(angle) * radius - 6}px`;
                                   
                                   const endX = parseFloat(newLeft) + 6;
                                   const endY = parseFloat(newTop) + 6;
                                   
                                   const dx = endX - startX;
                                   const dy = endY - startY;
                                   const distance = Math.hypot(dx, dy);
                                   const rotation = Math.atan2(dy, dx) * 180 / Math.PI;

                                   const line = document.createElement('div');
                                   line.classList.add('talent-line');
                                   line.style.left = `${startX}px`;
                                   line.style.top = `${startY}px`;
                                   line.style.width = `${distance}px`;
                                   line.style.transform = `rotate(${rotation}deg)`;
                                   talentViz.insertBefore(line, talent);

                                   talent.style.left = newLeft;
                                   talent.style.top = newTop;
                                   
                                   requestAnimationFrame(() => line.style.opacity = '1');

                               }, Math.random() * 1000);
                           }
                        });
                    }
                }, { threshold: 0.8 });
                talentObserver.observe(talentViz);
            }
        });
    </script>
</body>
</html>